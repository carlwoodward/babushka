require 'spec_helper'

describe Renderable, '#render_to' do
  before { subject.render_to(tmp_prefix / 'example.conf') }
  subject { Renderable.new('spec/renderable/example.conf.erb') }
  it "should have added the prefix" do
    (tmp_prefix / 'example.conf').read.should =~
      /# Generated by babushka-[\d\.]+ at [\d\-\:\s+]+\. [0-9a-f]{40}/
  end
  it "should have interpolated the erb" do
    (tmp_prefix / 'example.conf').read.should =~ /root #{tmp_prefix};/
  end
end
